---
title: PDS Change of GP 
keywords:  messaging, bundles
tags: [fhir,messaging]
sidebar: overview_sidebar
permalink: pds_change_of_gp.html
summary: "The FHIR profiles used for the PDS Change of GP event message bundle"
---

PDS Change of GP event messages are generated by the Spine and published to the NEMS when the registered GP within a patient's PDS record is changed. The event message contains details of the previous and current registered GP Practice for the patient as per the guidance below.

## Bundle structure

Specifies mandatory referencing within the Event Message Bundle.

<div style="text-align:center; margin-bottom:20px" >
	<a href="images/messages/change_of_gp_bundle.png" target="_blank"><img src="images/messages/change_of_gp_bundle.png"></a>
	<p>PDS Change of GP Bundle <a href="images/messages/change_of_gp_bundle.png" target="_blank">(open in new TAB)</a></p>
</div>

In the `CareConnect-Patient-1` resource, the `generalPractitioner` element references the organization resource representing the patient's current GP practice.

In the `CareConnect-EpisodeOfCare-1` resource, the `managingOrganization` element references the organization resource which was the patient's previous GP practice.


## PDS Change of GP Message Life Cycle ##

The `PDS Change of GP`  event message will always contain a `messageEventType` extension with value `new` in the MessageHeader resource. There will be no `update` or `delete` version of this event message.

If a subscriber receives multiple `PDS Change of GP` event messages for the same patient, the last event message as indicated by the `meta.lastUpdated` element within the MessageHeader resource should be considered the source of truth for the patient's GP details.


## Onward Delivery ##

The delivery of the PDS Change of GP event messages to subscribers via MESH will use the following `WorkflowID` within the MESH control file. This `WorkflowID` will need to be added to the receiving MESH mailbox configuration before event messages can be received.

| MESH WorkflowID | `CHANGEOFGP_1` |


## Resource Population Requirements and Guidance ##

The following requirements and resource population guidance should be followed in addition to the requirements and guidance outlined in the [Generic Requirements](explore_generic_event_requirements.html) page.

### [Bundle](http://hl7.org/fhir/STU3/StructureDefinition/Bundle)

The Bundle resource is the container for the event message and SHALL conform to the [Bundle](http://hl7.org/fhir/STU3/StructureDefinition/Bundle) FHIR profile.

| Resource Cardinality | 1..1 |

| Element | Cardinality | Additional Guidance |
| --- | --- | --- |
| type | 1..1 | Fixed value: `message` |


### [Event-MessageHeader-1](https://simplifier.net/Messaging/Event-MessageHeader-1)

The MessageHeader resource included as part of the event message SHALL conform to the [Event-MessageHeader-1](https://simplifier.net/Messaging/Event-MessageHeader-1) constrained FHIR profile and the additional population guidance as per the table below:

| Resource Cardinality | 1..1 |

| Element | Cardinality | Additional Guidance |
| --- | --- | --- |
| meta.lastUpdated | 1..1 | DateTime when the patient record was updated with the details included in this event message. This element should be used for message sequencing |
| extension(messageEventType) | 1..1 | Fixed value: `new` |
| event | 1..1 | Fixed Value: pds-change-of-gp-1 (PDS Change of GP) |
| focus | 1..1 | This will reference the "CareConnect-Communication-1" resource which contains information relating to the event message. |
| timestamp | 1..1 | This timestamp indicates when the message was sent. This date can be used to infer the start date of the new GP registration as the GP system will update the Spine when the patient is registered with the practice. |


### [CareConnect-Communication-1](https://simplifier.net/hl7fhircareconnectbaselineforstu3/CareConnect-Communication-1)

The Communication resource included in the event message SHALL conform to the [CareConnect-Communication-1](https://simplifier.net/hl7fhircareconnectbaselineforstu3/CareConnect-Communication-1) constrained FHIR profile and the additional population guidance as per the table below:

| Resource Cardinality | 1..1 |

| Element | Cardinality | Additional Guidance |
| --- | --- | --- |
| status | 1..1 | Fixed value: `completed` |
| sender | 0..1 | This will reference the sending organization of the event message.<br/> For PDS events this will be a reference to a CareConnect-Organization-1 resource within the message bundle. **\***|
| subject | 1..1 | This will reference the patient resource representing the patient who is the subject of this event. |


### [CareConnect-Patient-1](https://simplifier.net/hl7fhircareconnectbaselineforstu3/CareConnect-Patient-1)

The patient resource included in the event message SHALL conform to the [CareConnect-Patient-1](https://simplifier.net/hl7fhircareconnectbaselineforstu3/CareConnect-Patient-1) constrained FHIR profile and the additional population guidance as per the table below:

| Resource Cardinality | 1..1 |

| Element | Cardinality | Additional Guidance |
| --- | --- | --- |
| meta.versionId | 1..1 | This element will contain the serial change number (SCN) of the patient record within Spine at the time this event was published. |
| identifier | 1..1 | Patient NHS Number SHALL be included within the nhsNumber identifier slice |
| generalPractitioner | 0..1 | References to an organization representing the new GP Practice which is the current primary care provider for the patient. In a de-registration scenario where a new GP is not applied to the patients record, this element will not be included. |

The `generalPractitioner` element does not contain a date indicating when the patient was registered at their new GP practice. The `timestamp` within the MessageHeader resource may be considered the effective date for the new GP Practice as this is the date when the patient's GP registration was changed to the new GP on the Spine.


### [CareConnect-Organization-1](https://simplifier.net/hl7fhircareconnectbaselineforstu3/CareConnect-Organization-1)

Within the bundle there will be multiple organization resources, including one for the patient's current GP Practice and one for the patient's previous GP Practice. Other Organization resources may be included where referenced from within other resources in the bundle. The Organization resources included in the bundle SHALL conform to the [CareConnect-Organization-1](https://simplifier.net/hl7fhircareconnectbaselineforstu3/CareConnect-Organization-1) constrained FHIR profile and the additional population guidance as per the table below:

| Resource Cardinality | 1..* |

| Element | Cardinality | Additional Guidance |
| --- | --- | --- |
| identifier | 1..1 | The organization ODS code SHALL be included within the odsOrganizationCode identifier slice |
| name | 1..1 | A human readable name for the organization SHALL be included in the organization resource |
| partOf | 1..1 | Reference to the commissioning organization |

**\*** Organization details may be retrieved using the [ODS Lookup API](https://developer.nhs.uk/apis/ods/restfulapis_identification_organization.html) as [ODSAPI-Organization-1](https://fhir.nhs.uk/STU3/StructureDefinition/ODSAPI-Organization-1) resources. These MUST then be transformed to [CareConnect-Organization-1](https://simplifier.net/hl7fhircareconnectbaselineforstu3/CareConnect-Organization-1) resources for use within the event message bundle.

### [CareConnect-EpisodeOfCare-1](https://simplifier.net/hl7fhircareconnectbaselineforstu3/CareConnect-EpisodeOfCare-1)

The EpisodeOfCare resource included in the event message SHALL conform to the [CareConnect-EpisodeOfCare-1](https://simplifier.net/hl7fhircareconnectbaselineforstu3/CareConnect-EpisodeOfCare-1) constrained FHIR profile and the additional population guidance as per the table below.

Where a new GP is registered on the patient record, but there was no previous GP, this resource will not be included in the message.

| Resource Cardinality | 0..1 |

| Element | Cardinality | Additional Guidance |
| --- | --- | --- |
| status | 1..1 | Fixed value: finished |
| type.coding.system | 1..1 | Fixed value: https://fhir.nhs.uk/STU3/CodeSystem/EMS-PDS-PatientCareProvisionType-1 |
| type.coding.code | 1..1 | Fixed value: 1 |
| type.coding.display | 1..1 | Fixed value: Primary care |
| patient | 1..1 | The patient who is the focus of this episode of care |
| managingOrganization | 1..1  | The previous GP practice |
| period.start | 0..1 | Date on which the **old** GP practice assumed responsibility for the patient. |
| period.end | 0..1 | Date on which the **old** GP Practice stopped being responsible for the patient. |


### [CareConnect-HealthcareService-1](https://simplifier.net/hl7fhircareconnectbaselineforstu3/CareConnect-HealthcareService-1)

The HealthcareService resource included in the event message SHALL conform to the [CareConnect-HealthcareService-1](https://simplifier.net/hl7fhircareconnectbaselineforstu3/CareConnect-HealthcareService-1) constrained FHIR profile and the additional population guidance as per the table below:

| Resource Cardinality | 0..1 |

| Element | Cardinality | Additional Guidance |
| --- | --- | --- |
| providedBy | 1..1 | This will reference the 'sender' organization of the event message. |
| type | 1..1 | Fixed value: PDS (Personal Demographics Service)<br/>This will represent the type of service responsible for the event message. This will have a value from the ValueSet [EMS-HealthcareServiceType-1](https://fhir.nhs.uk/STU3/ValueSet/EMS-HealthcareServiceType-1) |

## PDS Change of GP Example ##

```xml
{% include_relative examples/PDS-Change-Of-GP-ems-example.xml %}
```
